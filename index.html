<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8">

	<title>Color Thief</title>

  <meta name="description" content="Get the dominant color or color palette from an image.">
  <meta name="author" content="Lokesh Dhakar">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/prism.css">
</head>
<body>

 <header class="header">
    <div class="column">

      <div class="sidebar">
      </div>

      <div class="content">

        <h1 class="logo">
          Color Thief
        </h1>
        <a href="https://lokeshdhakar.com" class="logo-credit">by Lokesh Dhakar</a>
        <p class="lead">
          Grab the color palette from an image using just Javascript.
          <br />Works in the browser and in Node.
        </p>


        <a href="https://github.com/lokesh/color-thief" class="gh">
          <span class="gh-label">
            <svg class="gh-logo" viewbox="0 0 512 512">
              <path d="M256 0C115 0 0 115 0 256c0 113 73 209 175 243 13 2 18-5 18-12v-48c-64 12-81-16-86-30-3-7-15-30-26-36-9-5-22-17 0-17 20 0 35 19 39 26 23 39 60 28 75 21 2-17 9-28 16-34-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-33 3-68 0 0 21-7 70 26 20-6 42-9 64-9s43 3 64 9c49-33 70-26 70-26 14 35 5 61 3 68 16 18 26 41 26 69 0 98-60 120-117 126 9 8 17 23 17 47v70c0 7 5 15 18 12 100-33 173-129 173-242C512 115 397 0 256 0z" />
            </svg>
            Github
          </span>
          <span class="gh-count">
            <svg class="gh-star" viewbox="0 0 896 1024">
              <path d="M896 384l-313-41L448 64 313 343 0 384l230 208L171 895l277-149 277 148L665 593 896 384z" />
            </svg>
            <span class="gh-count-number"></span>
          </span>
        </a>
      </div>

    </div>
  </header>



  <div class="main">
    <div class="column">

    <div class="sidebar">
      <nav id="nav" class="nav">
        <ul class="nav-list">
          <li class="nav-list-item"><a href="#examples" class="nav-link">Examples</a></li>
          <li class="nav-list-item"><a href="#getting-started" class="nav-link">Getting started</a></li>
          <li class="nav-list-item"><a href="#api" class="nav-link">API</a></li>
          <li class="nav-list-item"><a href="#faq" class="nav-link">FAQ</a></li>
          <li class="nav-list-item"><a href="#support" class="nav-link">Support</a></li>
          <li class="nav-list-item"><a href="#license" class="nav-link">License</a></li>
        </ul>
      </nav>
    </div>

    <div class="content">


      <!-- EXAMPLES -->


      <section id="examples" class="examples-section">
        <h2>Examples</h2>
        <div id="example-images"></div>
      </section>

      <section id="drag-drop" class="drag-drop-section">
        <div class="container">
          <h2>Try it yourself</h2>
          <div id="drop-zone" class="drop-zone">
            <div class="drop-zone-label default-label">Drag an image here</div>
            <div class="drop-zone-label dragging-label">Drop it!</div>
          </div>
          <div id="dragged-images" class="dragged-images"></div>
        </div>
      </section>


      <!-- GETTING STARTED -->


      <section id="getting-started" class="getting-started-section">
        <h2>Getting started</h2>

        <p class="before-list">The Color Thief package includes multiple distribution files to support different environments and build processes. Here is the list of all the files in the <code>/dist</code> folder and what formats they support:</p>
        <ul>
          <li><strong>color-thief.js</strong> - CommonJS module for use in Node.</li>
          <li><strong>color-thief.mjs</strong> - ES6 module. For modern browsers as well as Webpack and Rollup.</li>
          <li><strong>color-thief.umd.js</strong> - UMD module. For simple script tag loading that exposes a global variable or for RequireJS AMD support.</li>
          <li><strong>color-thief.min.js</strong> -  Duplicate of <em>color-thief.umd.js</em>. Kept around to maintain backwards compatibility.</li>
        </ul>

        <h3>Using in Node</h3>

        <ol class="guide-steps">
          <li><strong>Install and import.</strong> The name of the package is <em>colorthief</em>, not <em>color-thief</em>.
<pre><code class="prism language-javascript">$ npm i --save colorthief</code></pre>

<pre><code class="prism language-javascript">const ColorThief = require('colorthief');</code></pre>
          </li>
          <li><strong>Get colors.</strong> Both the <code>getColor()</code> and <code>getPalette()</code> methods return a Promise when used in Node.
<pre><code class="prism language-javascript line-numbers">const img = resolve(process.cwd(), 'rainbow.png');

ColorThief.getColor(img)
    .then(color => { console.log(color) })
    .catch(err => { console.log(err) })

ColorThief.getPalette(img, 5)
    .then(palette => { console.log(palette) })
    .catch(err => { console.log(err) })</code></pre>
          </li>
        </ol>

         <h3>Using in the browser</h3>

        <h4>1. Install</h4>
        <p class="before-list">There are multiples ways to install Color Thief when using it in the browser:</p>
        <ul class="guide-steps">
          <li><strong>Install as dependency with npm</strong>. The name of the package is <em>colorthief</em>, not <em>color-thief</em>.
<pre><code class="prism language-javascript">$ npm i --save colorthief</code></pre>
          </li>
          <li><strong>Load from a CDN.</strong> The distribution files are hosted on <a href="https://cdnjs.com/libraries/color-thief">cdnjs</a> for quick access.
<pre><code class="prism language-xml">&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js">&lt;/script></code></pre>
          </li>
          <li><strong>Download from Github.</strong> You can download a zip of the latest release (or any previous one) from the project's <a href="https://github.com/lokesh/color-thief/releases">Github Releases page</a>.</li>
        </ul>


        <h4>2. Import and use</h4>
        <ul class="guide-steps">
          <li><strong>As a global variable.</strong>
<pre><code class="prism language-xml line-numbers">&lt;script src="node_modules/colorthief/dist/color-thief.umd.js">&lt;/script>
&lt;script>
    const colorThief = new ColorThief();
    const img = document.querySelector('img');

    // Make sure image is finished loading
    if (img.complete) {
      colorThief.getColor(img);
    } else {
      image.addEventListener('load', function() {
        colorThief.getColor(img);
      });
    }
&lt;/script></code></pre>
</li>
          <li><strong>As an ES6 module.</strong>
<div class="code-file">index.html</div>
<pre><code class="prism language-xml">&lt;script type="module" src="app.js">&lt;/script></code></pre>

<div class="code-file">app.js</div>
<pre><code class="prism language-javascript line-numbers">import ColorThief from './node_modules/colorthief/dist/color-thief.mjs'

const colorThief = new ColorThief();
const img = document.querySelector('img');

if (img.complete) {
  colorThief.getColor(img);
} else {
  image.addEventListener('load', function() {
    colorThief.getColor(img);
  });
}
</code></pre>
          </li>
          <li><strong>With RequireJS.</strong> The <code>/dist/color-thief.umd.js</code> file uses the UMD (Universal Module Definition) format. This includes RequireJS AMD support.</li>
        </ul>
      </section>


      <!-- API -->


      <section id="api" class="options-section">
        <h2>API</h2>

        <p><em>Note: Both `getColor` and `getPalette` return a `Promise` when used in Node.</em></p>


        <div class="method">
          <div class="method-name">getColor(image [, quality])</div>
          <div class="method-return">Returns: [Number, Number, Number]</div>
          <div class="method-description">
            <p>Gets the dominant color from the image. Color is returned as an array of three integers representing red, green, and blue values.</p>
            <p><span class="method-argument">image</span> - When called in the browser, this argument expects an HTML image element, not a URL. When run in Node, this argument expects a path to the image.</p>

            <p><span class="method-argument">quality</span> is an optional argument that must be an Integer of value 1 or greater, and defaults to 10. The number determines how many pixels are skipped before the next one is sampled. We rarely need to sample every single pixel in the image to get good results. The bigger the number, the faster a value will be returned.</p>
          </div>
        </div>

        <div class="method">
          <div class="method-name">getPalette(image [, colorCount, quality]</div>
          <div class="method-return">Returns: [[Number, Number, Number], ...]</div>
          <div class="method-description">
            <p>Gets a palette from the image by clustering similar colors. The palette is returned as an array containing colors, each color itself an array of three integers.</p>
          </div>
        </div>

      </section>


      <!-- FAQ -->


      <section id="faq" class="faq-section">
        <h2>FAQ</h2>
        <p>All questions are about the usage of Color Thief in the browser, not Node.</p>

        <h3>Do I have to wait for the image to load?</h3>

        <p>Yes. If you see an error that reads: <code>Cannot read property '0' of null</code>, it is likely that the image had not finished loading when you passed it to <code>getColor()</code> or <code>getPalette()</code>.</p>

<pre><code class="prism language-javascript line-numbers">// RISKY ðŸ™€
const colorThief = new ColorThief();
const img = document.querySelector('img');

colorThief.getColor(img);</code></pre>

<br>

<pre><code class="prism language-javascript line-numbers"><// BETTER ðŸ‘
const colorThief = new ColorThief();
const img = document.querySelector('img');

if (img.complete) {
  colorThief.getColor(img);
} else {
  image.addEventListener('load', function() {
    colorThief.getColor(img);
  });
}</code></pre>

        <h3>How do I test the script locally?</h3>

        <p>If you are testing the script locally in a web browser, you might see the following error: <code>Access to script at 'file://...' from origin 'null' has been blocked by CORS policy</code>. This is because the browser restricts direct access to the filesystem.</p>

        <p>To get around this, you can set up a minimal server to host the files. One option is <a href="https://github.com/http-party/http-server">http-server</a>. To run this on demand without installing it as a project dependency, you can use the <code>npx</code> command:</p>
<pre><code class="prism language-xml line-numbers">$ npx http-server</code></pre>

        <p>Now you can visit <em>http://localhost:8080</em> to view your server.</p>


        <h3>Does it work if the image is hosted on another domain?</h3>

        <h4>A) If you manage the server hosting the image...</h4>
        <p>Yes. If you are seeing an error that reads: <code>The canvas has been tainted by cross-origin data.</code>, then you are running into a <em>cross-origin resouce sharing (CORS)</em> issue. Check the following two items:</p>

        <ol class="guide-steps">
          <li><strong>CORS policy on the server.</strong> Is the server hosting the image properly configured? Make sure the requesting domain is whitelisted in the <em>access-control-allow-origin</em> header, or the server hosting the image has an open policy: <code>access-control-allow-origin: *</code>.
          </li>
          <li><strong>crossorigin attr</strong>. The HTML image element must be given a <em>crossorigin</em> attribute.
<pre><code class="prism language-xml">&lt;img src="https://aws.com/s3/image.jpg" crossorigin="anonymous" /></code></pre>

<p>If you're dynamically adding the image element, you can do the following:</p>
<pre><code class="prism language-javascript line-numbers">const colorThief = new ColorThief();
const img = new Image();

img.addEventListener('load', function() {
  colorThief.getColor(img);
};

img.crossOrigin = 'Anonymous';
img.src = 'https://aws.com/s3/image.jpeg'</code></pre>
          </li>
        </ol>

        <h4>B) If you don't have access to the server hosting the image...</h4>

        <p>You can use a proxy server that pulls down the image and returns it with a more liberal CORS policy. Below you can see an example of this with an image that is proxied through a public Google server. If you don't own the proxy server, just know, that you are at their mercy. But this is handy in a pinch for testing.</p>

<pre><code class="prism language-javascript line-numbers">const colorThief = new ColorThief();
const img = new Image();

img.addEventListener('load', function() {
  colorThief.getColor(img);
};

let imageURL = 'https://i.pinimg.com/564x/3b/b4/9b/3bb49bd2a7f86e29b5670da1fe03fee4.jpg';
let googleProxyURL = 'https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?container=focus&refresh=2592000&url=';

img.crossOrigin = 'Anonymous';
img.src = googleProxyURL + encodeURIComponent(imageURL);</code></pre>

        <h3>How do I get hex values?</h3>
        <p>The ColorThief methods return colors as an array of three integers representing <span style="font-family: var(--code-font); color: #ff4f30; font-weight: var(--bold)">red</span>, <span style="font-family: var(--code-font); color: #00a91c; font-weight: var(--bold)">green</span>, and <span style="font-family: var(--code-font); color: #00a2ff; font-weight: var(--bold)">blue</span> values. If you are looking to use the output in CSS, you can do that using the rgb format: <code>color: rgb(102, 51, 153)</code>. If you do need to convert to hex, you can use the following function:</p>

        <pre><code class="prism language-javascript line-numbers">const rgbToHex = (r, g, b) => '#' + [r, g, b].map(x => {
  const hex = x.toString(16)
  return hex.length === 1 ? '0' + hex : hex
}).join('')

rgbToHex(102, 51, 153); // #663399</code></pre>

<!--
        <h3>Determining lightness/darkness</h3>
        <p>1) Besides checking lightness to determine if the text should be light or dark.</p>
        <p>2) Lightest or darkest color in palette</p>
        <p>...</p>

        <h3>Reading image files on your computer</h3>
        <p>...</p>

        <h3>Reading image files on another domain</h3>
        <p>...</p> -->
      </section>


      <!-- SUPPORT -->


      <section id="support">
        <h2>Help</h2>

        <h3>Trouble using Color Thief?</h3>
        <p>Follow the steps below to get help. Make sure you have read the documentation on this page first.</p>
        <ol>
          <li><a href="//stackoverflow.com/questions/tagged/color-thief">Search Stackoverflow</a> to see if other people have run into the same issue you are having.</li>
          <li>If your issue is unique, then <a href="//stackoverflow.com/questions/ask">post a new question on Stackoverflow</a>. Use the <code>color-thief</code> tag to make it easier to find.</li>
        </ol>

        <h3>Have a feature request?</h3>
        <ol>
          <li><a href="https://github.com/lokesh/color-thief/issues">Search through existing Github Issues and PRs</a> to see if the feature has been discussed or already created.</li>
          <li>If your feature request is unique, then <a href="https://github.com/lokesh/color-thief/issues/new">post a new issue in Github</a> detailing your request.</li>
        </ol>

        <h3>Found a bug?</h3>
        <ol>
          <li><a href="https://github.com/lokesh/color-thief/issues">Search through existing Github Issues</a> that have been reported to avoid creating a duplicate issue.</li>
          <li>If your bug has not been reported, <a href="<a href="https://github.com/lokesh/color-thief/issues/new">create a new issue</a>. In your bug report, please includes the version of the library you are using, your browser and operating system, and steps to recreate.</li>
        </ol>
      </section>


      <!-- LICENSE -->


      <section id="license" class="license-section">
        <h2>License</h2>
        <p>Color Thief is licensed under the <a href="https://github.com/lokesh/color-thief/blob/master/LICENSE">MIT License</a>.</p>

        <p>Github provides a nice summary of the license:<br>
        <em>"A short and simple permissive license with conditions only requiring preservation of copyright and license notices. Licensed works, modifications, and larger works may be distributed under different terms and without source code."</em></p>

      </section>


      <!-- FOOTER -->

      <footer>
        <p>
          <div class="logo-credit">Created by Lokesh Dhakar</div>
          <a href="https://twitter.com/lokesh" class="button">Twitter</a> <a href="https://lokeshdhakar.com" class="button">Website</a>
        </p>
      </footer>

    </div><!-- .content -->
    </div><!-- .content-column -->
  </div><!-- .main -->





  <!-- Mustache templates -->
  <script id='image-section-template' type='text/x-mustache'>
    {{#images}}
    <div class="image-section {{class}}">
      <div class="image-wrap">
        <button class="run-functions-button">
          <span class="no-touch-label">Click</span>
          <span class="touch-label">Tap</span>
        </button>
        <img class="target-image" src="{{file}}" />
      </div>
      <div class="color-thief-output"></div>
    </div>
    {{/images}}
  </script>

  <script id="color-thief-output-template" type="text/x-mustache">
    <div class="output-layout">
      <div class="function get-color">
        <h3 class="function-title">Dominant Color</h3>
        <div class="swatches">
          <div class="swatch" style="background-color: rgb({{color.0}}, {{color.1}}, {{color.2}})" 
            onclick='navigator.clipboard.writeText("rgb({{color.0}}, {{color.1}}, {{color.2}})")'>
          </div>
        </div>
        <div class="function-code">
          <code>colorThief.getColor(image):{{elapsedTimeForGetColor}}ms</code>
        </div>
      </div>
      <div class="function get-palette">
        <h3 class="function-title">Palette</h3>
        <div class="function-output">
          <div class="swatches">
            {{#palette}}
              <div class="swatch" style="background-color: rgb({{0}}, {{1}}, {{2}})" 
                onclick='navigator.clipboard.writeText("rgb({{0}}, {{1}}, {{2}})")'></div>
            {{/palette}}
          </div>
        </div>
        <div class="function-code">
          <code>colorThief.getPalette(image):{{elapsedTimeForGetPalette}}ms</code>
        </div>
      </div>
    </div>
  </script>

  <script src="./js/index.js"></script>
</body>
</html>
